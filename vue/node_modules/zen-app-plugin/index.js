!function(){let e=require("terser-webpack-plugin"),{VueLoaderPlugin:t}=require("vue-loader"),n=require("path"),o=require("fs"),s=require("body-parser"),r=require("./makeIndex"),{makeRootIndex:i,makeSonIndex:a}=r,l=require("./plugin");function c(e,t){if(t.length<2)return;let s,r=t.filter(((t,r)=>(0===r&&(s=n.join(e,t),o.existsSync(s)||o.mkdirSync(s)),r>0)));c(s,r)}var p={entry:{},output:{filename:"[name].js"},watchOptions:{ignored:["node_modules","dist","debug"],poll:300},externals:{vue:"Vue","router-view":"VueRouter","element-plus":"ElementPlus"},performance:{maxEntrypointSize:512e3,maxAssetSize:512e3,hints:"warning"},plugins:[new t],module:{noParse:/Vue|jquery/,rules:[{test:/\.jsx?$/,exclude:/(node_modules|bower_components)/,use:{loader:"babel-loader",options:{cacheDirectory:!0,presets:[["@vue/app",{modules:"commonjs",loose:!0,useBuiltIns:"entry"}]],plugins:["@babel/plugin-syntax-jsx"]}}},{test:/\.vue$/,loader:"vue-loader"},{test:/\.css$/,use:["style-loader","css-loader"]},{test:/\.scss$/,use:["style-loader","css-loader",{loader:"sass-loader",options:{implementation:require("sass")}}]}]}};module.exports=({target:t,mode:r,ROOT:u,port:d,name:m,ws:h,apps:g={},moduled:f})=>{let v,b,y,j,w;for(w=o.readdirSync(n.resolve(u,"src")),y=0,j=w.length;y<j;y++)b=w[y],-1!==b.indexOf(".js")&&(v=n.basename(b),v=v.substr(0,v.length-3),p.entry[v]=n.resolve(u,"src",b));if(p.resolve={alias:{"@":n.resolve(u,"src"),"@icons":n.resolve(u,"node_modules/zen-app-icon/extend")},extensions:[".js",".vue",".jsx",".json"]},p.mode=r,p.optimization=function(t){return"production"===t?{splitChunks:!1,minimize:!0,minimizer:[new e({parallel:!0,extractComments:!1,exclude:/node_modules/,terserOptions:{compress:{drop_console:!0,collapse_vars:!0,reduce_vars:!0,drop_debugger:!0},mangle:{reserved:["zen","$"]},output:{comments:!1,ascii_only:!0},sourceMap:!1,toplevel:!0,ie8:!1,keep_fnames:!1,safari10:!1}})]}:{}}(r),"development"===r){const e="thor"!==m,t={"/api":{target:"http://127.0.0.1:"+d,secure:!1,changeOrigin:!0},"/do":{target:"http://127.0.0.1:"+d,secure:!1,changeOrigin:!0},"/thor/":{target:"https://thor.zeto.me",secure:!1,changeOrigin:!0}};t["/"+m+"/"]={target:"http://127.0.0.1:"+d,secure:!1,changeOrigin:!0,compress:!1,headers:{"Content-Type":"no-transform"},ws:!!h},t["/kooteam/"]||(t["/kooteam/"]={target:"https://kooteam.zeto.me",secure:!1,changeOrigin:!0}),Object.keys(g).forEach((e=>{let n=g[e]+"";-1===n.indexOf(":")&&(n="http://127.0.0.1:"+n),t["/"+e+"/"]={target:n,secure:!1,changeOrigin:!0}})),p.cache={type:"memory"},p.devServer={open:!0,hot:e,client:!1,host:"0.0.0.0",allowedHosts:"all",historyApiFallback:!0,onAfterSetupMiddleware:function(e){const{app:t}=e;t.use(s.json());const r=n.join(u,"src","pages");t.get("/coder.html",(function(e,t){return t.send(function(e){return`<!DOCTYPE html><html><head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="chrome,IE=edge"/> <meta name="HandheldFriendly" content="true"/><link rel="icon" href="data:image/ico;base64,aWNv"/><meta name="format-detection" content="telephone=no,email=no"/> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, user-scalable=no, minimal-ui, viewport-fit=cover"/> <meta name="renderer" content="webkit"/> <meta name="msapplication-tap-highlight" content="no"/> <title>云智低码引擎</title> <script src="//b.ebus.vip/zeto/latest/zen.js"><\/script> <link rel="stylesheet" type="text/css" href="//b.ebus.vip/zeto/latest/zen.css"> <script> window.coderHost = "https://thor.zeto.me";window.appName='${e}' <\/script></head><body><script src="https://b.ebus.vip/thor/v0.0.2/detail.js"><\/script></body></html>`}(m))})),t.get("/datav.html",(function(e,t){return t.send(function(e){return`<!doctypehtml><meta charset=utf-8><meta content="chrome,IE=edge"http-equiv=X-UA-Compatible><meta content=true name=HandheldFriendly><link href=data:image/ico;base64,aWNv rel=icon><meta content="telephone=no,email=no"name=format-detection><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,user-scalable=no,minimal-ui,viewport-fit=cover"name=viewport><meta content=webkit name=renderer><meta content=no name=msapplication-tap-highlight><title>大屏设计器</title><script src=//b.ebus.vip/zeto/latest/zen.js><\/script><link href=//b.ebus.vip/zeto/latest/zen.css rel=stylesheet><script>zen.host="https://thor.zeto.me",window.appName="${e}"<\/script><body><script src=https://b.ebus.vip/datav/v0.0.1/editor.js><\/script>`}(m))})),t.post("/coder/read",(function(e,t){const{file:s,key:i}=e.body;if(!s)return t.json({code:10001,message:"参数错误"});const a=n.join(r,s);if(!o.existsSync(a))return t.json({code:1e4,data:null});let l={code:1e4,data:o.readFileSync(a,"utf-8")};t.json(l)})),t.post("/coder/write",(function(e,t){const{file:s,content:l,type:p}=e.body;if(!s)return t.json({code:10001,message:"参数错误"});const u=s.split("/");c(r,u);const d=n.join(r,s);if(o.writeFileSync(d,l),"page"===p){const e=u.splice(0,u.length-2),t=n.join(r,e.join(n.sep));if(0===e.length)return i(r);a(t,e.join("/"),r)}t.json({code:1e4,message:"操作成功"})}))},proxy:t,static:{directory:n.join(u,"public")},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}}}else{let e;if(p.devtool=!1,p.output.clean=!0,f){const t=n.join(u,"package.json"),s=o.readFileSync(t,"utf8"),r=JSON.parse(s);e=n.join(u,"..","vue","public",r.name)}else e=n.join(u,"dist");p.output.path=e}return p.plugins.push(new l(t)),p}}();